---
layout: single
title: "SEB Section 1 copy"
categories: [JS/Node.js]
tag: [codestates, JS/Node.js]
toc: true
---

# 변수 복사

- 기본형 데이터는 **불변성**을 띄고, 참조형 데이터는 **가변성** 이라는 특징을 띈다고 했다.
- 그렇다면 기본형 데이터와 가변형 데이터의 차이점을 알아보자.

## 기본형 데이터와 참조형 데이터의 복사 비교

```js
var a = 10;
var b = a;

var obj1 = { c: 10, d: "ddd" };
var obj2 = obj1;
```

- 먼저 기본형 데이터를 보자. 첫번째 줄에서 변수 영역에서 빈공간 @1001를 확보 한 후, 식별자 a로 지정했다.
  데이터 영역에서 숫자 10을 검색한 후, 없으므로 빈 공간 @5001에 저장 한 다음 이 주소를 @1001에 넣었다.
- 변수 영역에 빈 공간 @1002를 확보한 후, 식별자 b를 지정했다. 이제 식별자 a를 검색 한 후 그 값을 찾아야 한다.
  @1001에 저장된 값인 @5001을 들고 @1002에 값으로 대입한다.

- 참조형 데이터를 보면, @1003에 식별자 obj1로 지정한다. 데이터 영역의 빈 공간 @5002를 확보 한 후,
  데이터 영역에 담아야 하므로, 별도의 변수 영역을 만들어 @7103 ~ 을 확보해 그 주소를 저장한다.
  @7103에 c를 담고, @7104에 d를 담는다. 다음 c에 대입할 값 10을 데이터 영역에서 검색을 한다.
  @5001에 이미 10이 있으므로 그 주소를 @7103에 연결을 한다. d 또한 'ddd'라는 문자열을 검색 한다.
  'ddd'라는 문자열이 데이터 영역에 없으므로, @5003의 주소에 'ddd'를 담은 다음 그 주소를 @7104와 연결한다.
- 4번째 줄은 변수 영역에 빈 공간 @1004를 확보 한후 식별자를 obj2로 저장한다. obj1을 검색 한 후 그 값인 @5002를
  @1004에 연결한다.

- 변수를 복사하는 과정은 기본형 데이터와 참조형 데이터 모두 같은 주소를 바라보게 되는 점에서 동일하다.
- 복사 과정에서는 동일하지만 데이터 할당 과정에서 이미 차이가 있기 때문에 변수 복사 이후의 동작에도 큰 차이가 발생한다.

(객체의 프로퍼티를 변경했을 때)

```js
var a = 10;
var b = a;

var obj1 = { c: 10, d: "ddd" };
var obj2 = obj1;

b = 15;
obj.c = 20;
```

- 6번째 줄에서 데이터 영역에 15의 값이 없으므로 새로운 공간 @5004에 저장하고, 그 주소를 b의 주소를 찾아 저장한다.
- 7번째 줄에서는 변수 영역에 20이라는 값이 없으므로 새로운 공간 @5005에 저장하고, 그 주소를 든 채로 변수의 영역에서
  obj2를 찾고(@1004), obj2의 값인 @5002가 가리키는 변수 영역에서 다시 c를 찾아(@7103) 그곳에 @5005를 대입한다.

- 기본형 데이터를 복사한 변수 b의 값을 바꿨더니, @1002의 값이 달라진 반면, 참조형 데이터는 변하지 않았다.
- **즉 변수 a와 b는 서로 다른 주소를 바라보게 됐으나, 변수 obj1과 변수 obj2는 여전히 같은 객체를 바라보고 있는 상태다.**
- 이 결과가 기본형과 참조형 데이터의 가장 큰 차이점 이다.
- 어떤 데이터 타입이든 변수에 할당하기 위해서는 주솟값을 복사해야 하기 때문에, 엄밀히 따지면 모든 데이터 타입은 참조형 데이터일
  수 밖에 없다.
- 다만 기본형은 주솟값을 복사하는 과정이 한 번만 이뤄지고, 참조형은 한 단계를 더 거치게 된다는 차이가 있다.

(객체 자체를 변경했을 때)

```js
var a = 10;
var b = a;

var obj1 = { c: 10, d: "ddd" };
var obj2 = obj1;

b = 15;
obj.c = { c: 20, d: "ddd" };
```

- 객체 자체를 변경했을 때는, 데이터 영역의 새로운 공간에 새 객체가 저장되고 그 주소를 변수 영역의 obj2위치에 저장한다.
  객체에 대한 변경임에도 값이 달라지게 된다.
- 즉 참조형 데이터가 '가변값'이라고 설명할 때의 **'가변'은 내부의 프로퍼티를 변경할 때만 성립한다.**
